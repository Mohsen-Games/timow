<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIMOW - Simple To-Do App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .task-item {
            transition: all 0.3s ease;
        }
        
        .task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .completed {
            opacity: 0.7;
            text-decoration: line-through;
        }
        
        .auth-container {
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="text-gray-800">
    <div id="app" class="max-w-md mx-auto px-4 py-6">
        <!-- Authentication Screen -->
        <div id="auth-screen" class="auth-container text-center">
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-pink-500 mb-2">TIMOW</h1>
                <p class="text-gray-600">Your simple & elegant to-do app</p>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">Welcome back!</h2>
                <div class="mb-4">
                    <input type="text" id="username" placeholder="Username" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <div class="mb-6">
                    <input type="password" id="password" placeholder="Password" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <button id="login-btn" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-2 rounded-lg font-medium hover:opacity-90 transition duration-200 mb-3">
                    Log In
                </button>
                <p class="text-sm text-gray-500">Don't have an account? <span id="switch-to-signup" class="text-purple-500 cursor-pointer">Sign up</span></p>
            </div>
            
            <div id="signup-form" class="bg-white rounded-xl shadow-lg p-6 hidden">
                <h2 class="text-xl font-semibold mb-4">Create an account</h2>
                <div class="mb-4">
                    <input type="text" id="new-username" placeholder="Choose username" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <div class="mb-4">
                    <input type="password" id="new-password" placeholder="Create password" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <div class="mb-6">
                    <input type="password" id="confirm-password" placeholder="Confirm password" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <button id="signup-btn" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-2 rounded-lg font-medium hover:opacity-90 transition duration-200 mb-3">
                    Sign Up
                </button>
                <p class="text-sm text-gray-500">Already have an account? <span id="switch-to-login" class="text-purple-500 cursor-pointer">Log in</span></p>
            </div>
        </div>
        
        <!-- Main App Screen (hidden initially) -->
        <div id="app-screen" class="hidden">
            <!-- Header -->
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h1 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-pink-500">TIMOW</h1>
                    <p id="greeting" class="text-sm text-gray-600">Hello there!</p>
                </div>
                <button id="logout-btn" class="text-gray-500 hover:text-purple-500 transition duration-200">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
            
            <!-- Stats Summary -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-6 grid grid-cols-3 gap-2 text-center">
                <div>
                    <div class="text-2xl font-bold text-purple-500" id="total-tasks">0</div>
                    <div class="text-xs text-gray-500">Total</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-pink-500" id="completed-tasks">0</div>
                    <div class="text-xs text-gray-500">Done</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-blue-500" id="pending-tasks">0</div>
                    <div class="text-xs text-gray-500">Pending</div>
                </div>
            </div>
            
            <!-- Add Task Form -->
            <div class="bg-white rounded-xl shadow-lg p-4 mb-6">
                <div class="flex mb-3">
                    <input type="text" id="new-task" placeholder="What needs to be done?" class="flex-grow px-3 py-2 rounded-l-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <button id="add-task-btn" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 rounded-r-lg">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="flex items-center">
                    <input type="time" id="task-time" class="px-3 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 mr-2">
                    <select id="task-priority" class="px-3 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                        <option value="low">Low Priority</option>
                        <option value="medium" selected>Medium Priority</option>
                        <option value="high">High Priority</option>
                    </select>
                </div>
            </div>
            
            <!-- Task List -->
            <div id="task-list" class="space-y-3">
                <!-- Tasks will be added here dynamically -->
                <div class="text-center py-10 text-gray-500" id="empty-state">
                    <i class="fas fa-tasks text-4xl mb-3 text-purple-200"></i>
                    <p>No tasks yet. Add your first task!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const authScreen = document.getElementById('auth-screen');
            const appScreen = document.getElementById('app-screen');
            const loginBtn = document.getElementById('login-btn');
            const signupBtn = document.getElementById('signup-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const switchToSignup = document.getElementById('switch-to-signup');
            const switchToLogin = document.getElementById('switch-to-login');
            const signupForm = document.getElementById('signup-form');
            const loginForm = document.querySelector('#auth-screen > div:nth-child(2)');
            const greeting = document.getElementById('greeting');
            const newTaskInput = document.getElementById('new-task');
            const addTaskBtn = document.getElementById('add-task-btn');
            const taskList = document.getElementById('task-list');
            const emptyState = document.getElementById('empty-state');
            const totalTasksEl = document.getElementById('total-tasks');
            const completedTasksEl = document.getElementById('completed-tasks');
            const pendingTasksEl = document.getElementById('pending-tasks');
            const taskTimeInput = document.getElementById('task-time');
            const taskPrioritySelect = document.getElementById('task-priority');
            
            // Set current time as default
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            taskTimeInput.value = `${hours}:${minutes}`;
            
            // User data and tasks
            let currentUser = null;
            let users = JSON.parse(localStorage.getItem('timow-users')) || [];
            let tasks = JSON.parse(localStorage.getItem('timow-tasks')) || [];
            
            // Switch between login and signup forms
            switchToSignup.addEventListener('click', function() {
                loginForm.classList.add('hidden');
                signupForm.classList.remove('hidden');
            });
            
            switchToLogin.addEventListener('click', function() {
                signupForm.classList.add('hidden');
                loginForm.classList.remove('hidden');
            });
            
            // Login function
            loginBtn.addEventListener('click', function() {
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value.trim();
                
                if (!username || !password) {
                    alert('Please enter both username and password');
                    return;
                }
                
                const user = users.find(u => u.username === username && u.password === password);
                
                if (user) {
                    currentUser = user;
                    authScreen.classList.add('hidden');
                    appScreen.classList.remove('hidden');
                    updateGreeting();
                    loadUserTasks();
                } else {
                    alert('Invalid username or password');
                }
            });
            
            // Signup function
            signupBtn.addEventListener('click', function() {
                const username = document.getElementById('new-username').value.trim();
                const password = document.getElementById('new-password').value.trim();
                const confirmPassword = document.getElementById('confirm-password').value.trim();
                
                if (!username || !password || !confirmPassword) {
                    alert('Please fill in all fields');
                    return;
                }
                
                if (password !== confirmPassword) {
                    alert('Passwords do not match');
                    return;
                }
                
                if (users.some(u => u.username === username)) {
                    alert('Username already exists');
                    return;
                }
                
                const newUser = { username, password };
                users.push(newUser);
                localStorage.setItem('timow-users', JSON.stringify(users));
                
                currentUser = newUser;
                authScreen.classList.add('hidden');
                appScreen.classList.remove('hidden');
                updateGreeting();
                
                // Clear form
                document.getElementById('new-username').value = '';
                document.getElementById('new-password').value = '';
                document.getElementById('confirm-password').value = '';
                
                // Switch back to login form for next time
                signupForm.classList.add('hidden');
                loginForm.classList.remove('hidden');
            });
            
            // Logout function
            logoutBtn.addEventListener('click', function() {
                currentUser = null;
                appScreen.classList.add('hidden');
                authScreen.classList.remove('hidden');
                
                // Clear login form
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
            });
            
            // Add new task
            addTaskBtn.addEventListener('click', addTask);
            newTaskInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addTask();
                }
            });
            
            function addTask() {
                const taskText = newTaskInput.value.trim();
                const taskTime = taskTimeInput.value;
                const taskPriority = taskPrioritySelect.value;
                
                if (!taskText) {
                    alert('Please enter a task');
                    return;
                }
                
                const newTask = {
                    id: Date.now(),
                    text: taskText,
                    completed: false,
                    time: taskTime,
                    priority: taskPriority,
                    userId: currentUser.username,
                    createdAt: new Date().toISOString()
                };
                
                tasks.push(newTask);
                localStorage.setItem('timow-tasks', JSON.stringify(tasks));
                
                renderTask(newTask);
                updateTaskStats();
                
                // Clear input
                newTaskInput.value = '';
                newTaskInput.focus();
                
                // Hide empty state if it's the first task
                if (emptyState.style.display !== 'none') {
                    emptyState.style.display = 'none';
                }
            }
            
            // Load user's tasks
            function loadUserTasks() {
                if (!currentUser) return;
                
                const userTasks = tasks.filter(task => task.userId === currentUser.username);
                
                if (userTasks.length === 0) {
                    emptyState.style.display = 'block';
                } else {
                    emptyState.style.display = 'none';
                    userTasks.forEach(task => renderTask(task));
                }
                
                updateTaskStats();
            }
            
            // Render a single task
            function renderTask(task) {
                const taskItem = document.createElement('div');
                taskItem.className = `task-item bg-white rounded-xl shadow-lg p-4 flex items-center justify-between ${task.completed ? 'completed' : ''}`;
                taskItem.dataset.id = task.id;
                
                // Priority color
                let priorityColor = 'gray';
                if (task.priority === 'high') priorityColor = 'red';
                else if (task.priority === 'medium') priorityColor = 'yellow';
                else if (task.priority === 'low') priorityColor = 'green';
                
                taskItem.innerHTML = `
                    <div class="flex items-center">
                        <button class="complete-btn mr-3 w-6 h-6 rounded-full border-2 border-${priorityColor}-300 flex items-center justify-center ${task.completed ? `bg-${priorityColor}-500 border-${priorityColor}-500 text-white` : ''}">
                            ${task.completed ? '<i class="fas fa-check text-xs"></i>' : ''}
                        </button>
                        <div>
                            <div class="font-medium ${task.completed ? 'line-through' : ''}">${task.text}</div>
                            <div class="text-xs text-gray-500 flex items-center">
                                <i class="far fa-clock mr-1"></i> ${task.time}
                                <span class="mx-2">•</span>
                                <span class="text-${priorityColor}-500">${task.priority} priority</span>
                            </div>
                        </div>
                    </div>
                    <button class="delete-btn text-gray-400 hover:text-red-500">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                `;
                
                // Insert new task at the top
                if (taskList.firstChild && taskList.firstChild.id !== 'empty-state') {
                    taskList.insertBefore(taskItem, taskList.firstChild);
                } else {
                    taskList.appendChild(taskItem);
                }
                
                // Add event listeners
                taskItem.querySelector('.complete-btn').addEventListener('click', function() {
                    toggleTaskComplete(task.id);
                });
                
                taskItem.querySelector('.delete-btn').addEventListener('click', function() {
                    deleteTask(task.id);
                });
            }
            
            // Toggle task completion
            function toggleTaskComplete(taskId) {
                const taskIndex = tasks.findIndex(t => t.id == taskId);
                if (taskIndex === -1) return;
                
                tasks[taskIndex].completed = !tasks[taskIndex].completed;
                localStorage.setItem('timow-tasks', JSON.stringify(tasks));
                
                const taskItem = document.querySelector(`.task-item[data-id="${taskId}"]`);
                if (taskItem) {
                    taskItem.classList.toggle('completed');
                    
                    const completeBtn = taskItem.querySelector('.complete-btn');
                    const priority = tasks[taskIndex].priority;
                    let priorityColor = 'gray';
                    if (priority === 'high') priorityColor = 'red';
                    else if (priority === 'medium') priorityColor = 'yellow';
                    else if (priority === 'low') priorityColor = 'green';
                    
                    if (tasks[taskIndex].completed) {
                        completeBtn.innerHTML = '<i class="fas fa-check text-xs"></i>';
                        completeBtn.classList.add(`bg-${priorityColor}-500`, `border-${priorityColor}-500`, 'text-white');
                        completeBtn.classList.remove(`border-${priorityColor}-300`);
                    } else {
                        completeBtn.innerHTML = '';
                        completeBtn.classList.add(`border-${priorityColor}-300`);
                        completeBtn.classList.remove(`bg-${priorityColor}-500`, `border-${priorityColor}-500`, 'text-white');
                    }
                    
                    const textElement = taskItem.querySelector('.font-medium');
                    if (textElement) {
                        textElement.classList.toggle('line-through');
                    }
                }
                
                updateTaskStats();
            }
            
            // Delete task
            function deleteTask(taskId) {
                if (!confirm('Are you sure you want to delete this task?')) return;
                
                tasks = tasks.filter(t => t.id != taskId);
                localStorage.setItem('timow-tasks', JSON.stringify(tasks));
                
                const taskItem = document.querySelector(`.task-item[data-id="${taskId}"]`);
                if (taskItem) {
                    taskItem.classList.add('opacity-0', 'scale-95');
                    setTimeout(() => {
                        taskItem.remove();
                        
                        // Show empty state if no tasks left
                        if (taskList.children.length === 1 && taskList.firstChild.id === 'empty-state') {
                            emptyState.style.display = 'block';
                        }
                        
                        updateTaskStats();
                    }, 300);
                }
            }
            
            // Update task statistics
            function updateTaskStats() {
                if (!currentUser) return;
                
                const userTasks = tasks.filter(task => task.userId === currentUser.username);
                const total = userTasks.length;
                const completed = userTasks.filter(task => task.completed).length;
                const pending = total - completed;
                
                totalTasksEl.textContent = total;
                completedTasksEl.textContent = completed;
                pendingTasksEl.textContent = pending;
            }
            
            // Update greeting based on time of day
            function updateGreeting() {
                if (!currentUser) return;
                
                const hour = new Date().getHours();
                let greetingText = '';
                
                if (hour < 12) greetingText = `Good morning, ${currentUser.username}!`;
                else if (hour < 18) greetingText = `Good afternoon, ${currentUser.username}!`;
                else greetingText = `Good evening, ${currentUser.username}!`;
                
                greeting.textContent = greetingText;
            }
            
            // Check if user is already logged in (for page refresh)
            function checkLoggedInUser() {
                const lastUser = localStorage.getItem('timow-last-user');
                if (lastUser) {
                    const user = users.find(u => u.username === lastUser);
                    if (user) {
                        currentUser = user;
                        authScreen.classList.add('hidden');
                        appScreen.classList.remove('hidden');
                        updateGreeting();
                        loadUserTasks();
                    }
                }
            }
            
            // Initialize
            checkLoggedInUser();
        });
    </script>
</body>
</html>
